<link rel="stylesheet" href="/assets/css/recepcionPedidos.css">
<section id="recepcion-pedidos-view" class="main-content-section">
    <h2>Recepci칩n y Verificaci칩n de Mercanc칤a</h2>
    
    <div class="split-layout">
        
        <!-- COLUMNA IZQUIERDA: LISTADO DE PEDIDOS PENDIENTES -->
        <div class="list-section card">
            <h3>Pedidos Pendientes por Recibir (Status: Abierto)</h3>
            <div class="list-controls">
                <input type="text" id="filtro-pedido-ref" placeholder="Filtrar por Referencia de Pedido">
                <button id="btn-aplicar-filtro" class="btn-secondary">Filtrar</button>
            </div>
            
            <table id="pedidos-pendientes-table" class="data-table">
                <thead>
                    <tr>
                        <th>Referencia</th>
                        <th>Fecha</th>
                        <th>Proveedor</th>
                        <th>Art칤culos</th>
                        <th>Acci칩n</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Filas de pedidos pendientes se cargar치n aqu칤 con JS -->
                </tbody>
            </table>
        </div>
        
        <!-- COLUMNA DERECHA: SECCI칍N DE B칔SQUEDA Y COMPARACI칍N -->
        <div class="comparison-section card">
            <h3>Asociar y Comparar Documentos</h3>

            <!-- 1. Formulario de B칰squeda de Pedido -->
            <div class="form-group">
                <label for="input-pedido-ref">Referencia de Pedido a Recibir</label>
                <input type="text" id="input-pedido-ref" placeholder="Introduce Ref. de Pedido (P.ej: P001)" required>
                <button id="btn-buscar-pedido" class="btn-primary-small">Buscar Pedido</button>
            </div>
            
            <div id="pedido-seleccionado-info" class="info-box" style="display: none;">
                <strong>Pedido Seleccionado: </strong> <span id="pedido-ref-display"></span>
                <p class="text-xs">Usa el bot칩n "Recibir/Verificar" para entrar los detalles de recepci칩n.</p>
            </div>

            <hr class="separator">

            <!-- 2. Formulario de Comparaci칩n con Albar치n -->
            <h4>Comparar con Albar치n Recibido</h4>
            <div class="form-group">
                <label for="input-albaran-ref">N칰mero de Albar치n</label>
                <input type="text" id="input-albaran-ref" placeholder="Introduce el N칰mero de Albar치n (P.ej: A123)" required>
                <!-- Este bot칩n activa la l칩gica de comparaci칩n -->
                <button id="btn-comparar-albaran" class="btn-success-small">游댌 Comparar con Pedido</button>
            </div>

            <!-- 3. Resultados de la Comparaci칩n -->
            <div id="comparacion-resultados" class="results-box">
                <!-- La tabla de diferencias se mostrar치 aqu칤 con JS -->
                <p class="text-muted">Las diferencias entre el Pedido y el Albar치n se listar치n aqu칤.</p>
            </div>
        </div>
    </div>
</section>

<!-- MODAL PARA LA RECEPCI칍N DETALLADA DEL PEDIDO (Inicialmente oculto) -->
<div id="recepcion-modal" class="modal-backdrop" style="display: none;">
    <div class="modal-content">
        <span class="close-button">&times;</span>
        <h3>Recepci칩n Detallada del Pedido: <span id="modal-pedido-ref"></span></h3>
        
        <form id="recepcion-form">
            <input type="hidden" id="modal-albaran-id">
            
            <div class="form-group-horizontal">
                <label for="modal-albaran-ref">Albar치n Asociado:</label>
                <input type="text" id="modal-albaran-ref" placeholder="N칰mero de Albar치n (Ej: A123)" required>
            </div>

            <!-- Tabla de Art칤culos del Pedido para Checkeo -->
            <table id="modal-articulos-recepcion" class="modal-data-table">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Cant. Pedida</th>
                        <th>Cant. Recibida</th>
                        <th>Estado</th>
                        <th>Fecha/Hora Check</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Los art칤culos del pedido se insertar치n aqu칤 con JS -->
                </tbody>
            </table>

            <div class="form-group">
                <label for="recepcion-observaciones">Observaciones</label>
                <textarea id="recepcion-observaciones" rows="3" placeholder="A침ade comentarios sobre la recepci칩n."></textarea>
            </div>

            <button type="submit" class="btn-success">Guardar Recepci칩n y Actualizar Stock</button>
        </form>
    </div>
</div>