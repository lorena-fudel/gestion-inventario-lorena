<link rel="stylesheet" href="/assets/css/productoNuevo.css">
<section id="registro-productos-view" class="main-content-section">
    <h2>Registro Masivo de Nuevos Productos</h2>


    <!-- implementar: necesitas <select id="select-categoria"> y <select id="select-proveedor">. -->
    
    <div class="card form-card">
        <h3>Datos del Nuevo Producto</h3>
        
        <form id="form-nuevo-producto" class="form-grid-2col">

            <!-- Columna 1: Datos del Producto -->
            <div class="form-column">
                <div class="form-group">
                    <label for="new-producto-id">ID del Producto (Auto-Incremental)</label>
                    <!-- Este campo es solo informativo, el valor real se asignar√° en JS -->
                    <input type="text" id="new-producto-id" value="Pendiente..." disabled> 
                </div>
                <div class="form-group">
                <label>Categor√≠a:</label>
                <select id="select-categoria" name="categoriaId" class="form-control">
                    <option value="1">Cargando...</option>
                </select>
                </div>

                <div class="form-group">
                    <label>Proveedor:</label>
                    <select id="select-proveedor" name="proveedorId" class="form-control">
                        <option value="1">Cargando...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="new-producto-nombre">Nombre del Producto</label>
                    <input type="text" id="new-producto-nombre" required>
                </div>
                <div class="form-group">
                    <label for="new-producto-precio">Precio Unitario (‚Ç¨)</label>
                    <input type="number" id="new-producto-precio" required min="0" step="0.01">
                </div>
                <div class="form-group">
                    <label for="new-producto-fecha">Fecha de Creaci√≥n</label>
                    <input type="date" id="new-producto-fecha" required>
                </div>
                
            </div>

    <!-- Columna 2: Datos del Proveedor (simplificados para el registro) -->
    <div class="form-column">
        
        <div class="form-group" style="display: flex; gap: 10px; align-items: flex-end;">
            <div style="flex-grow: 1;">
                <label>NUEVO Proveedor:</label>
                <!-- <select id="select-proveedor" name="proveedorId">
                    <option value="">-- Selecciona un Proveedor --</option>
                </select> -->
                <input type="text" id="new-prov-nombre" placeholder="Nombre Nuevo Proveedor" style="display: none;">
            </div>
            
            <button type="button" id="btn-toggle-new-prov" class="btn-secondary" style="margin-bottom: 2px;">
                ‚ûï Nuevo
            </button>
              <!-- boton a√±adir productos a la lista temporal -->
            <div class="form-actions full-width" style="grid-column: 1 / -1; margin-top: 20px; text-align: right;">
                <button type="button" id="btn-anadir-a-tabla" class="btn-primary">
                    ‚ûï A√±adir a la Lista Temporal
                </button>
            </div>
            
        </div>

        <div id="extra-prov-fields" style="display: none;">
            <div class="form-group">
                <label>Email:</label>
                <input type="email" id="new-prov-email">
            </div>
            <div class="form-group">
                <label>Tel√©fono:</label>
                <input type="tel" id="new-prov-telefono">
            </div>
            <div class="form-group">
                <label>Direcci√≥n:</label>
                <input type="text" id="new-prov-direccion">
            </div>
            <div class="form-actions full-width" style="grid-column: 1 / -1; margin-top: 20px; text-align: right;">
                <button type="button" id="btn-anadir-a-tabla" class="btn-primary">
                    ‚ûï A√±adir a la Lista Temporal
                </button>
            </div>
          
        </div>

    </div>

    <!-- TABLA TEMPORAL DE PRODUCTOS A REGISTRAR -->
    <div class="card table-card">
        <h3>Productos Pendientes de Registro (<span id="contador-productos-temp">0</span>)</h3>
        
        <table id="productos-temp-table" class="data-table">
            <thead>
                <tr>
                    <th>ID Temp.</th>
                    <th>Nombre</th>
                    <th>Precio (‚Ç¨)</th>
                    <th>Proveedor</th>
                    <th>Fecha</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <!-- Los productos se a√±adir√°n temporalmente aqu√≠ con JS -->
            </tbody>
        </table>
        
        <div class="final-actions">
            <button id="btn-registrar-productos" class="btn-success" disabled>
                üíæ Registrar TODOS los Productos (Enviar a DB)
            </button>
        </div>
        
    </div>
    
    <!-- MODAL DE CONFIRMACI√ìN DE BORRADO (Usado por el bot√≥n "Borrar Producto") -->
    <div id="delete-confirmation-modal" class="modal-backdrop" style="display: none;">
        <div class="modal-content small-modal">
            <h3>Confirmar Borrado</h3>
            <p>‚ö†Ô∏è ¬øEst√°s seguro de que deseas **eliminar definitivamente** el producto temporal seleccionado?</p>
            <div class="modal-actions">
                <button id="btn-confirmar-borrado" class="btn-danger">S√≠, Borrar</button>
                <button id="btn-cancelar-borrado" class="btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>
    
</section>